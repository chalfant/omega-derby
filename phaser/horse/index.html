<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>hello horse!</title>
  <script src="phaser.min.js"></script>
</head>
<body>

  <script type="text/javascript">

  window.onload = function() {

    var scrollSpeed = 200;

    var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });
    var horses = [];
    var running = false;

    function preload () {

      game.load.image('bg', 'assets/background.png');

      game.load.image('horse1', 'assets/horse.gif');
      game.load.image('horse2', 'assets/horse2.gif');
      game.load.image('horse3', 'assets/horse3.gif');
      game.load.image('horse4', 'assets/horse4.gif');
      game.load.image('horse5', 'assets/horse5.gif');

      game.load.audio('sfx', 'assets/post.mp3');
    }

    function startRace() {
      running = true;
      //this.background.autoScroll(-99,0);
      for (var i = horses.length - 1; i >= 0; i--) {
        //horses[i].body.velocity.x = 100;
      };
    }

    function stopRace() {
      running = false;
    }

    function create () {

      this.background = this.add.tileSprite(0,0, this.world.width, 486, 'bg');

      this.physics.startSystem(Phaser.Physics.ARCADE);


      var sfx = game.add.audio('sfx');
      sfx.addMarker('start', 0, 6);
      sfx.onStop.add(startRace, this);
      sfx.play('start');

      var margin = 198 - 32; // stands minus half a horse
      var pad = 0;
      var horseHeight = 64;
      for (var i=0; i<5; i++) {
        var y_pos = margin + i * (pad + horseHeight);
        horses[i] = game.add.sprite(0, y_pos, 'horse'+(i+1));
        this.physics.arcade.enableBody(horses[i])
      };
    }

    function update () {

    }
  };

  </script>

</body>
</html>